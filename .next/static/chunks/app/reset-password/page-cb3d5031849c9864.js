(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{4595:(e,s,a)=>{Promise.resolve().then(a.bind(a,8133))},8133:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var r=a(2522),t=a(5004),n=a(107),i=a(978),o=a(6874);function l(){let e=(0,n.useSearchParams)(),s=(0,n.useRouter)(),[a,l]=(0,t.useState)(""),[d,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[m,p]=(0,t.useState)({message:"",type:""}),[w,g]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let s=e.get("token");s||p({message:"Reset link is invalid. Request a new one.",type:"error"}),l(s||"")},[e]);let f=async e=>{if(e.preventDefault(),!a){p({message:"Reset token is missing. Please request a new link.",type:"error"});return}g(!0),p({message:"Resetting password...",type:""});try{let e=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,password:d,confirmPassword:u})}),r=await e.json();if(!e.ok)throw Error((null==r?void 0:r.message)||"Unable to reset password");p({message:(null==r?void 0:r.message)||"Password reset successfully. Redirecting to login...",type:"success"}),setTimeout(()=>{s.push("/login")},1500)}catch(e){p({message:(null==e?void 0:e.message)||"Unable to reset password right now.",type:"error"})}finally{g(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{}),(0,r.jsx)("section",{className:"auth-hero",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"auth-card",children:[(0,r.jsx)("h1",{children:"Create a new password"}),(0,r.jsx)("p",{children:"Enter a strong password that you haven't used before for this account."}),(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"newPassword",children:"New Password"}),(0,r.jsx)("input",{type:"password",id:"newPassword",name:"password",required:!0,minLength:6,placeholder:"Enter new password",value:d,onChange:e=>c(e.target.value)})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",required:!0,minLength:6,placeholder:"Confirm new password",value:u,onChange:e=>h(e.target.value)})]}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary btn-full",disabled:w,children:w?"Resetting...":"Reset Password"})]}),m.message&&(0,r.jsx)("div",{className:"auth-feedback ".concat(m.type),children:m.message}),(0,r.jsx)("div",{className:"auth-meta",children:(0,r.jsx)("a",{href:"/login",children:"Back to login"})})]}),(0,r.jsxs)("div",{className:"auth-side",children:[(0,r.jsx)("img",{src:"/images/home.webp",alt:"Reset password"}),(0,r.jsxs)("div",{className:"auth-side-content",children:[(0,r.jsx)("h2",{children:"Secure your account"}),(0,r.jsx)("p",{children:"Use a unique password to keep your InfySkill account safe."})]})]})]})}),(0,r.jsx)(o.Z,{})]})}function d(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(l,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[26,429,842,728,744],()=>s(4595)),_N_E=e.O()}]);